#!/bin/sh
# /usr/share/libalpm/scripts/comm-changend-faces

# Test if hook is being triggered
touch /tmp/hook-was-triggered

# Directories
originDir="/usr/share/pixmaps/faces"
destDir="/usr/share/pixmaps/.faces-gnome"

# Function for logging
log_msg() {
    echo "[comm-changend-faces] $1"
}

# Check if origin directory exists
if [ ! -d "$originDir" ]; then
    log_msg "Origin directory not found: $originDir"
    exit 1
fi

# Create destination directory if it doesn't exist
if [ ! -d "$destDir" ]; then
    mkdir -p "$destDir"
    log_msg "Destination directory created: $destDir"
fi

# Move only non-big files
for file in "$originDir"/*; do
    if [ -f "$file" ]; then
        filename=$(basename "$file")
        # Se o nome do arquivo não começa com "big" e não é um link simbólico
        if [[ ! "$filename" == big* ]] && [ ! -L "$file" ]; then
            mv "$file" "$destDir"/ 2>/dev/null
            log_msg "Moved: $filename"
        fi
    fi
done

log_msg "Operation completed successfully"
exit 0
